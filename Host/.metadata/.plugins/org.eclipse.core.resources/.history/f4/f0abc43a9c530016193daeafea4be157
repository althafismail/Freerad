/*
 * App_Tasks.cpp
 *
 *  Created on: Jul 18, 2016
 *      Author: Althaf.Ismail
 */

// C/C++ includes
#include <stdio.h>

// Freerad includes
#include "App_Tasks.h"

/*!
 * @brief Task responsible for printing of "Hello world." message.
 * Usage:
 * 	{
 *		char tempString[PRINTF_STRING_SIZE] = {0};
 *		sprintf(tempString, "   ");
 *		xQueueSend(Q_Printf, tempString, 0);
 *	}
 *
 */
void Printf_Task(void *pvParameters)
{
	static char tempString[PRINTF_STRING_SIZE];

	printf("\r\n////////////////////////////////////////////\r\n");
	printf("//  Freerad Project %s %s  //\r\n", __DATE__, __TIME__);
	printf("////////////////////////////////////////////\r\n\r\n");

	for(;;)
	{
        xQueueReceive(Q_Printf, tempString, portMAX_DELAY);\
        printf("%s", tempString);
	}
}

void GPIOA_IRQ_Task(void *pvParameters)
{
	static uint32_t notificationValue = 0;
	static char tempString[20];

	for(;;)
	{
		xTaskNotifyWait(0x0, 0xffffffff, &notificationValue, portMAX_DELAY);
		sprintf(tempString, "GPIOA: %08x\r\n", (unsigned int)notificationValue);
		xQueueSend(Q_Printf, tempString, 0);
	}
}
void GPIOC_IRQ_Task(void *pvParameters)
{
	static uint32_t notificationValue = 0;
	static char tempString[20];

	for(;;)
	{
		xTaskNotifyWait(0x0, 0xffffffff, &notificationValue, portMAX_DELAY);
		sprintf(tempString, "GPIOC: %08x\r\n", (unsigned int)notificationValue);
		xQueueSend(Q_Printf, tempString, 0);
	}
}
