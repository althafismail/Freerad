/*
 * App_CallbackFunctions.c
 *
 *  Created on: Jul 18, 2016
 *      Author: Althaf.Ismail
 */

// C/C++ Includes
#include <stdio.h>

// Freerad includes
#include "App_CallbackFunctions.h"

/*!
 * @brief Timer callback.
 */
void vExampleTimerCallback(TimerHandle_t xTimer)
{
	uint32_t temp = FTM2->CNT;
	GPIO_TogglePinsOutput(BIT_LED_A);
	printf("%08x\r\n", (unsigned int)temp);
}

void PORTA_IRQHandler(void)
{
	uint32_t temp = GPIO_GetPinsInterruptFlags(GPIOA);
	BaseType_t wakeUp;
	GPIO_ClearPinsInterruptFlags(GPIOA, 0xFFFFFFFF);
	xTaskNotifyFromISR(GPIOA_IRQ_TaskHandle, temp, eSetBits, &wakeUp);
	if(wakeUp == pdTRUE)
		taskYIELD();
}

void PORTC_IRQHandler(void)
{
	uint32_t temp = GPIO_GetPinsInterruptFlags(GPIOC);
	BaseType_t wakeUp;
	GPIO_ClearPinsInterruptFlags(GPIOC, 0xFFFFFFFF);
	xTaskNotifyFromISR(GPIOC_IRQ_TaskHandle, temp, eSetBits, &wakeUp);
	if(wakeUp == pdTRUE)
		taskYIELD();
}
