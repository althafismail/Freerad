/*
 * App_Tasks.cpp
 *
 *  Created on: Jul 18, 2016
 *      Author: Althaf.Ismail
 */

// C/C++ includes
#include <stdio.h>

// Freerad includes
#include "App_Tasks.h"

/*!
 * @brief Task responsible for printing of "Hello world." message.
 * Usage:
 * 	{
 *		char tempString[PRINTF_STRING_SIZE] = {0};
 *		sprintf(tempString, "   ");
 *		xQueueSend(Q_Printf, tempString, 0);
 *	}
 *
 */
void Printf_Task(void *pvParameters)
{
	static char tempString[PRINTF_STRING_SIZE];

	for(;;)
	{
        xQueueReceive(Q_Printf, tempString, portMAX_DELAY);
        printf("%s", tempString);
	}
}

void GPIOA_IRQ_Task(void *pvParameters)
{
	static uint32_t notificationValue = 0;
//	static char tempString[20] = {0};

	for(;;)
	{
		xTaskNotifyWait(0x0, 0xffffffff, &notificationValue, portMAX_DELAY);
		sprintf(logString, "GPIOA: %08x\r\n", (unsigned int)notificationValue);
		xQueueSend(Q_Printf, logString, 0);
	}
}
void GPIOC_IRQ_Task(void *pvParameters)
{
	static uint32_t notificationValue = 0;
//	static char tempString[20] = {0};

	for(;;)
	{
		xTaskNotifyWait(0x0, 0xffffffff, &notificationValue, portMAX_DELAY);
		sprintf(logString, "GPIOC: %08x\r\n", (unsigned int)notificationValue);
		xQueueSend(Q_Printf, logString, 0);
	}
}

void FTM2_IRQ_Task(void *pvParameters)
{
	static uint32_t notificationValue = 0;
//	static char tempString[20] = {0};

	FTM_EnableInterrupts(FTM2, kFTM_TimeOverflowInterruptEnable);

	for(;;)
	{
		xTaskNotifyWait(0x0, 0xffffffff, &notificationValue, portMAX_DELAY);
		sprintf(logString, "Enc: %08x\r\n", (unsigned int)notificationValue);
		xQueueSend(Q_Printf, logString, 0);
	}
}
